<div id="post-sort">Sort by:
	<button>New</button>
	<button>Hot</button>
	<button>Top</button>
</div>
<br>
<br>

<ng-container *ngFor="let post of posts; let i = index">
	<div class="post-preview">
		<div class="post-header">
			<div class="same-line">
				<h3>{{ post.title }}</h3>
				<button style="margin-right: 5px;" *ngIf="post.authorUsername === usernameOfUserOnScreen"
					(click)="removePost(i)">🗑</button>
			</div>
			<p>{{ post.description }}</p>
			<i>author: {{ post.authorUsername }}</i>
			<i style="font-size: .8rem">post date: {{ post.createdAt | date: 'dd/MM/yyyy' }} at {{ post.createdAt |
				date: 'HH:mm' }}</i>
		</div>

		<ng-container *ngIf="post.mediaLinks.length > 0">
			<div class="post-image">
				<button (click)="previousImage(i)" [disabled]="currentPostIndexes[i] === 0">&larr;</button>

				<ng-container *ngIf="isImage(post.mediaLinks[currentPostIndexes[i]]); else videoTemplate">
					<img [src]="post.mediaLinks[currentPostIndexes[i]]" alt="post img">
				</ng-container>
				<ng-template #videoTemplate>
					<video controls>
						<source [src]="post.mediaLinks[currentPostIndexes[i]]" type="video/mp4">
						Your browser does not support the video tag.
					</video>
				</ng-template>

				<button (click)="nextImage(i)"
					[disabled]="currentPostIndexes[i] === post.mediaLinks.length - 1">&rarr;</button>
			</div>

			<p class="current-media-index">({{ currentPostIndexes[i] + 1 }})</p>
		</ng-container>

		<div class="post-buttons">
			<button>👍</button>
			<p>0</p>
			<button>👎</button>
			<button>💬</button>
			<button style="font-size: 1.5rem;">&star;</button>
		</div>
	</div>

</ng-container>

<button style="display: flex; align-items: center; justify-content: center;" (click)="fetchPosts()">load more</button>
<br>
<br>