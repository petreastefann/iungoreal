<app-navbar></app-navbar>

<div id="title">
	<h2>Settings</h2>
</div>
<div id="header">
	<button (click)="selectSection('account')">Account</button>
	<button (click)="selectSection('regions')">Regions</button>
	<button (click)="selectSection('notifications')">Notifications</button>
	<button (click)="selectSection('profile')">Profile</button>
	<button (click)="selectSection('privacy')">Privacy</button>
	<button (click)="selectSection('feed')">Feed</button>
</div>


<div>
	<!-- 
		section -> side -> container -> div & button
	-->
	<div *ngIf="selectedSection === 'account'">
		<h3>you are in the account section</h3>
	</div>

	<!------------------------------------------------------------------------>

	<section *ngIf="selectedSection === 'regions'">
		<div class="left">
			<div class="container">
				<div class="details">
					<p class="left">current country: {{countryOfUser?.name || 'none'}}</p>
					<p style="font-style: italic; font-size: 0.7em">(careful! changing or removing the country will
						remove
						all your regions. you will need to add
						them again)</p>
				</div>
				<div class="buttons">
					<button (click)="showCountryOptions = !showCountryOptions">show options</button>
					<button (click)="removeCountryOfUser()">remove current</button>
				</div>
			</div>

			<div class="container">
				<div class="details">
					<p class="left">current primary region: {{primaryRegionOfUser?.name || 'none'}}</p>
				</div>
				<div class="buttons">
					<button (click)="showPrimaryRegionOptions = !showPrimaryRegionOptions">show options</button>
					<button (click)="removePrimaryRegionOfUser()">remove current</button>
				</div>
			</div>

			<div class="container">
				<div class="details">
					<p class="left">current secondary regions (max 3):
						<span *ngIf="secondaryRegionsOfUser.length > 0; else displayNone">
							<ng-container *ngFor="let region of secondaryRegionsOfUser; let i = index">
								<strong>{{ region.name }}{{ i !== secondaryRegionsOfUser.length - 1 ? ', ' : ''
									}}</strong>
							</ng-container>
						</span>
						<ng-template #displayNone>
							<strong>none</strong>
						</ng-template>
					</p>
				</div>
				<div class="buttons">
					<button (click)="showSecondaryRegionOptions = !showSecondaryRegionOptions">show options</button>
					<button (click)="showSecondaryRegionOptionsToRemove = !showSecondaryRegionOptionsToRemove">remove
						one</button>
				</div>
			</div>
		</div>

		<div class="right">
			<div *ngIf="showCountryOptions">
				<div class="container">
					<ul>
						<li *ngFor="let country of allCountries" (click)="setCountryForUser(country)">{{ country.name }}
						</li>
					</ul>
				</div>
			</div>

			<div *ngIf="showPrimaryRegionOptions">
				<ng-container *ngIf="!countryOfUser?.id">
					<p>you need to select a country first</p>
				</ng-container>
				<ul>
					<li *ngFor="let region of availableRegions" (click)="setPrimaryRegionForUser(region)">
						{{region.name}}</li>
				</ul>
			</div>

			<div *ngIf="showSecondaryRegionOptions">
				<ng-container *ngIf="!countryOfUser?.id">
					<p>you need to select a country first</p>
				</ng-container>
				<ul>
					<li *ngFor="let region of availableRegions" (click)="addSecondaryRegionForUser(region)">{{
						region.name }}</li>
				</ul>
			</div>
			
			<div *ngIf="showSecondaryRegionOptionsToRemove">
				<ng-container *ngIf="!secondaryRegionsOfUser.length">
					<p>you have no secondary region to remove</p>
				</ng-container>
				<ul>
					<li *ngFor="let region of secondaryRegionsOfUser" (click)="removeSecondaryRegionOfUser(region)">
						{{
						region.name }}</li>
				</ul>
			</div>
		</div>

		<!-- <p class="left">current primary region: <strong>{{primaryRegionOfUser?.name || 'none'}}</strong></p>
			<div *ngIf="showPrimaryRegionOptions">
				<ng-container *ngIf="!countryOfUser?.id">
					<p>you need to select a country first</p>
				</ng-container>
				<ul>
					<li *ngFor="let region of availableRegions" (click)="setPrimaryRegionForUser(region)">
						{{region.name}}</li>
				</ul>
			</div>

			<p class="left">current secondary regions (max 3):
				<span *ngIf="secondaryRegionsOfUser.length > 0; else displayNone">
					<ng-container *ngFor="let region of secondaryRegionsOfUser; let i = index">
						<strong>{{ region.name }}{{ i !== secondaryRegionsOfUser.length - 1 ? ', ' : '' }}</strong>
					</ng-container>
				</span>
				<ng-template #displayNone>
					<strong>none</strong>
				</ng-template>
			</p>
			<div *ngIf="showSecondaryRegionOptions">
				<ng-container *ngIf="!countryOfUser?.id">
					<p>you need to select a country first</p>
				</ng-container>
				<ul>
					<li *ngFor="let region of availableRegions" (click)="addSecondaryRegionForUser(region)">{{
						region.name }}</li>
				</ul>
			</div>
			<div *ngIf="showSecondaryRegionOptionsToRemove">
				<ng-container *ngIf="!secondaryRegionsOfUser.length">
					<p>you have no secondary region to remove</p>
				</ng-container>
				<ul>
					<li *ngFor="let region of secondaryRegionsOfUser" (click)="removeSecondaryRegionOfUser(region)">
						{{
						region.name }}</li>
				</ul>
			</div> -->
	</section>

	<!------------------------------------------------------------------------>

	<div class="left" *ngIf="selectedSection === 'notifications'">
		<h3>you are in the notifications section</h3>
	</div>

	<!------------------------------------------------------------------------>

	<div class="left" *ngIf="selectedSection === 'profile'">
		<h3>you are in the profile section</h3>
	</div>

	<!------------------------------------------------------------------------>

	<div class="left" *ngIf="selectedSection === 'privacy'">
		<h3>you are in the privacy section</h3>
	</div>

	<!------------------------------------------------------------------------>

	<div class="left" *ngIf="selectedSection === 'feed'">
		<h3>you are in the feed section</h3>
	</div>
</div>